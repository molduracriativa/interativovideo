<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Convite Interativo</title>

<meta property="og:type" content="website">
<meta property="og:title" content="Convite Interativo">
<meta property="og:description" content="Você recebeu um convite especial. Toque para abrir e viver essa experiência.">
<meta property="og:url" content="https://molduracriativa.github.io/interativovideo/">

<meta property="og:image" content="https://molduracriativa.github.io/interativovideo/media/capalink.png">
<meta property="og:image:secure_url" content="https://molduracriativa.github.io/interativovideo/media/capalink.png">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Convite Interativo">
<meta name="twitter:description" content="Você recebeu um convite especial. Toque para abrir.">
<meta name="twitter:image" content="https://molduracriativa.github.io/interativovideo/media/capalink.png">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;height:100%;overflow:hidden;background:#000;display:flex;justify-content:center;align-items:center}

/* ===== VIDEO CENTRALIZADO ===== */
#video{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:1;
}

#audio{display:none}

/* ===== TEXTO CONVIDADO CENTRALIZADO ===== */
#footerInvite{
  position:absolute;
  bottom:8%; /* Subi um pouco para não cortar em alguns celulares */
  width:90%;
  left: 50%;
  transform: translateX(-50%) translateY(20px);
  text-align:center;
  color:#fff;
  font-family: 'Segoe UI', Arial, sans-serif;
  z-index:5;
  opacity:0;
  transition:.8s ease-out;
  pointer-events:none;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
}
#footerInvite.show{
  opacity:1;
  transform:translateX(-50%) translateY(0);
}
#footerInvite span{
  display:block;
  margin-top:8px;
  font-size:19px;
  font-weight: 300;
}
#footerInvite strong {
  font-size: 24px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

#video1Click{
  position:absolute;
  inset:0;
  z-index:10;
}

#audioControl{
  position:absolute;
  top:15px;
  left:15px;
  width:80px;
  height:80px;
  z-index:20;
  display:none;
}
#menuToggle,#backToVideo2{
  position:absolute;
  top:15px;
  right:15px;
  width:120px;
  height:80px;
  z-index:20;
  display:none;
}

#menu{
  position:absolute;
  right:0;
  top:70%;
  transform:translateY(-50%);
  width:300px;
  height:520px;
  background:url("media/menu.png") no-repeat right center;
  background-size:contain;
  display:none;
  z-index:15;
  pointer-events:none;
}
.menu-hotspot{
  position:absolute;
  right:35px;
  width:90px;
  height:70px;
  cursor:pointer;
  pointer-events:auto;
}
#btn1{top:95px}
#btn2{top:195px}
#btn3{top:295px}

#mapsHotspot{
  position:absolute;
  left:50%;
  bottom:200px;
  transform:translateX(-50%);
  width:320px;
  height:120px;
  z-index:20;
  display:none;
}

#formHotspot{
  position:absolute;
  left:50%;
  bottom:80px;
  transform:translateX(-50%);
  width:320px;
  height:90px;
  z-index:20;
  display:none;
}

#countdown{
  position:absolute;
  left:50%;
  bottom:200px;
  transform:translateX(-50%);
  display:none;
  z-index:20;
  color:#fff;
  font-family:Arial,sans-serif;
}
.count-grid{display:flex;gap:14px;text-align:center;justify-content:center}
.count-box{min-width:70px}
.count-num{font-size:28px;font-weight:bold}
.count-label{font-size:12px;margin-top:4px}

#transition{
  position:absolute;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:50;
  background:rgba(0,0,0,.15);
}
#transition img{
  width:160px;
  animation:zoomIcon .9s ease forwards;
}
@keyframes zoomIcon{
  0%{transform:scale(.2);opacity:0}
  40%{transform:scale(1.1);opacity:1}
  70%{transform:scale(.95);opacity:1}
  100%{transform:scale(.3);opacity:0}
}
</style>
</head>

<body>

<video id="video" autoplay muted playsinline preload="auto"></video>
<audio id="audio" src="media/audio.mp3" loop preload="auto"></audio>

<div id="video1Click"></div>
<div id="footerInvite"></div>

<div id="audioControl"></div>
<div id="menuToggle"></div>
<div id="backToVideo2"></div>

<div id="menu">
  <div id="btn1" class="menu-hotspot" onclick="goVideoWithTransition(3)"></div>
  <div id="btn2" class="menu-hotspot" onclick="goVideoWithTransition(4)"></div>
  <div id="btn3" class="menu-hotspot" onclick="goVideoWithTransition(5)"></div>
</div>

<a id="mapsHotspot" href="https://maps.google.com" target="_blank"></a>
<a id="formHotspot" href="https://forms.gle/gCTygBPyy5mx22aZA" target="_blank"></a>

<div id="transition">
  <img src="media/icon.png">
</div>

<div id="countdown">
  <div class="count-grid">
    <div class="count-box"><div class="count-num" id="d">00</div><div class="count-label">Dias</div></div>
    <div class="count-box"><div class="count-num" id="h">00</div><div class="count-label">Horas</div></div>
    <div class="count-box"><div class="count-num" id="m">00</div><div class="count-label">Min</div></div>
    <div class="count-box"><div class="count-num" id="s">00</div><div class="count-label">Seg</div></div>
  </div>
</div>

<script>
const LOOP_START = 8;
const EVENT_DATE = "2026-08-20T18:00:00";
let video2FirstPlay = true;
let countdownInterval;
let preloaded = false;

const convidados=["Drika","Andressa","Ramon","Myrtes","Thais","Marcela","Tatiane","Kelly","Katia","Aline"];

const video=document.getElementById("video");
const audio=document.getElementById("audio");
const footer=document.getElementById("footerInvite");
const clickV1=document.getElementById("video1Click");
const audioCtrl=document.getElementById("audioControl");
const menuToggle=document.getElementById("menuToggle");
const menu=document.getElementById("menu");
const backBtn=document.getElementById("backToVideo2");
const mapsHotspot=document.getElementById("mapsHotspot");
const countdown=document.getElementById("countdown");
const formHotspot=document.getElementById("formHotspot");
const transition=document.getElementById("transition");

const d=document.getElementById("d"), h=document.getElementById("h"), m=document.getElementById("m"), s=document.getElementById("s");

function preloadNextVideos(){
  if(preloaded) return;
  preloaded = true;
  [3,4,5].forEach(n=>{
    const v=document.createElement("video");
    v.src=`media/video${n}.mp4`;
    v.preload="auto";
  });
}

function resetVideoEvents(){
  video.onended=null;
  video.ontimeupdate=null;
  video.onloadedmetadata=null;
  clearInterval(countdownInterval);
}

function loadVideo(n,fromReturn=false){
  resetVideoEvents();
  video.src=`media/video${n}.mp4`;
  video.load();
  video.play();

  footer.classList.remove("show");
  clickV1.style.display=n===1?"block":"none";
  audioCtrl.style.display=n===2?"block":"none";
  menuToggle.style.display=n===2?"block":"none";
  menu.style.display="none";
  backBtn.style.display=n>=3?"block":"none";
  mapsHotspot.style.display=n===3?"block":"none";
  countdown.style.display=n===4?"block":"none";
  formHotspot.style.display=n===4?"block":"none";

  if(n===1) showInviteWithDelay();
  if(n===4) startCountdown();

  if(n===2){
    preloadNextVideos();
    if(video2FirstPlay && !fromReturn){
      video.onended=()=>video.pause();
      video2FirstPlay=false;
    }else{
      video.onloadedmetadata=()=>video.currentTime=LOOP_START;
      video.ontimeupdate=()=>{
        if(video.currentTime>=video.duration-.2) video.currentTime=LOOP_START;
      };
    }
  }
  if(n>=3) video.onended=()=> { video.currentTime=0; video.play(); };
}

function goVideoWithTransition(n){
  transition.style.display="flex";
  const img=transition.firstElementChild;
  img.style.animation="none";
  img.offsetHeight;
  img.style.animation="zoomIcon .9s ease forwards";
  setTimeout(()=>{
    transition.style.display="none";
    loadVideo(n);
  },900);
}

function startCountdown(){
  const target=new Date(EVENT_DATE).getTime();
  countdownInterval=setInterval(()=>{
    const diff=target-Date.now();
    if(diff<=0){ clearInterval(countdownInterval); return; }
    d.textContent=String(Math.floor(diff/86400000)).padStart(2,"0");
    h.textContent=String(Math.floor(diff/3600000)%24).padStart(2,"0");
    m.textContent=String(Math.floor(diff/60000)%60).padStart(2,"0");
    s.textContent=String(Math.floor(diff/1000)%60).padStart(2,"0");
  },1000);
}

function showInviteWithDelay(){
  const nome=new URLSearchParams(location.search).get("nome");
  if(nome && convidados.includes(nome)){
    setTimeout(()=>{
      footer.innerHTML=`<strong>${nome},</strong><span>Este convite foi preparado<br>especialmente para você</span>`;
      footer.classList.add("show");
    },1000);
  }
}

clickV1.onclick=()=>{ audio.play(); loadVideo(2); };
audioCtrl.onclick=e=>{ e.stopPropagation(); audio.paused ? audio.play() : audio.pause(); };
menuToggle.onclick=e=>{ e.stopPropagation(); menu.style.display=menu.style.display==="block"?"none":"block"; };
backBtn.onclick=()=>loadVideo(2,true);

loadVideo(1);
</script>

</body>
</html>
